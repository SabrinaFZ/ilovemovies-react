(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,a){e.exports=a.p+"static/media/movie_default.dcf5e9d4.png"},28:function(e,t,a){e.exports=a(58)},34:function(e,t,a){},35:function(e,t,a){},38:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(19),l=a.n(c),i=(a(34),a(35),a(12)),r=a(11),s=a.n(r),m=a(13),u=a(4),v=a(5),d=a(7),f=a(6),p=a(8),h=a(2),b=a(61),E=a(60),C=a(26),j=a(20),O=(a(38),o.a.createContext()),g=function(e,t,a,n){e.preventDefault(),a(t,e.target.id,n)},y=function(e){var t=e.rating,a=e.selectedCollection,n=e.movie;return o.a.createElement(O.Consumer,null,function(e){var c=e.addRating;return o.a.createElement("article",{className:"movie-section_rating"},o.a.createElement("i",{onClick:function(e){return g(e,a,c,n)},id:"happy",className:"rating_happy far fa-smile"+("happy"===t?" active":"")}),o.a.createElement("i",{onClick:function(e){return g(e,a,c,n)},id:"meh",className:"rating_meh far fa-meh"+("meh"===t?" active":"")}),o.a.createElement("i",{onClick:function(e){return g(e,a,c,n)},id:"sad",className:"rating_sad far fa-frown"+("sad"===t?" active":"")}))})},N=a(24),k=a.n(N),_=function(e,t){e.stopPropagation(),e.preventDefault(),t.showCollections()},S=function(e){return o.a.createElement(O.Consumer,null,function(t){var a=t.addFavorite;return o.a.createElement("li",{onClick:function(t){_(t,e),a(e.collection,e.movie)}},e.collection.name)})},w={content:{padding:"0",top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}},M=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(f.a)(t).call(this,e))).state={openModal:!1},a.closeModal=a.closeModal.bind(Object(h.a)(Object(h.a)(a))),a}return Object(p.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){this.setState({openModal:!0})}},{key:"closeModal",value:function(e){e.stopPropagation(),this.setState({openModal:!1}),this.props.showCollections()}},{key:"render",value:function(){var e=this;return o.a.createElement(O.Consumer,null,function(t){var a=t.collections;return o.a.createElement("div",{className:"modal"},o.a.createElement(k.a,{isOpen:e.state.openModal,onRequestClose:e.closeModal,ariaHideApp:!1,style:w},o.a.createElement("header",{className:"modal-header"},o.a.createElement("h2",null,"Select a collection")),o.a.createElement("div",{className:"modal-body"},o.a.createElement("ul",null,a.map(function(t){return o.a.createElement(S,Object.assign({key:t.id,collection:t},e.props))}),o.a.createElement(j.a,{style:{textDecoration:"none"},to:"/my-collections"},o.a.createElement("li",null,o.a.createElement("p",null,o.a.createElement("i",{className:"fas fa-plus"})," Create a new collection")))))))})}}]),t}(o.a.Component),F=(a(49),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(f.a)(t).call(this,e))).state={hideCollections:!1},a.showCollections=a.showCollections.bind(Object(h.a)(Object(h.a)(a))),a}return Object(p.a)(t,e),Object(v.a)(t,[{key:"showCollections",value:function(e){e&&e.preventDefault(),this.props.favorite||this.setState({hideCollections:!this.state.hideCollections})}},{key:"render",value:function(){var e=this;return o.a.createElement(O.Consumer,null,function(t){var a=t.deleteAllMoviesFavorite;return o.a.createElement("div",{className:"movie-section_favorite"},o.a.createElement("button",{className:"movie-section_button",onClick:function(t){e.showCollections(t),e.props.favorite&&a(e.props.movie)}},e.props.favorite?o.a.createElement("i",{className:"fas fa-star"}):o.a.createElement("i",{className:"far fa-star"})),e.state.hideCollections&&!e.props.favorite&&o.a.createElement(M,{showCollections:e.showCollections,movie:e.props.movie}))})}}]),t}(o.a.Component)),x=(a(50),a(14)),D=a.n(x),A=function(e,t){var a;return e&&e.length>0&&e.some(function(e){var n=!1;return(a=e.movies.find(function(e){return e.id===t.id}))&&(n=!0),n}),a},P=function(e){return o.a.createElement(O.Consumer,null,function(t){var a=t.collections,n=t.deleteFavorite;return o.a.createElement("section",{className:"movie-section"},"/my-collections"===e.path&&o.a.createElement(y,{movie:e.movie,rating:e.movie.rating,selectedCollection:e.selectedCollection}),o.a.createElement("div",{className:"movie-section_info"},o.a.createElement("img",{className:"movie-section_poster",src:e.movie.poster_path?"https://image.tmdb.org/t/p/w500/".concat(e.movie.poster_path):D.a,alt:"".concat(e.movie.title," Poster")}),o.a.createElement("p",{className:"movie-section_title"},e.movie.title)),"/my-collections"!==e.path?o.a.createElement(F,{movie:e.movie,favorite:!!A(a,e.movie)}):o.a.createElement("span",{className:"movie-section_delete"},o.a.createElement("i",{className:"fas fa-trash-alt",onClick:function(t){t.preventDefault(),n(e.selectedCollection,e.position)}})))})},R=(a(51),function(e){var t=e.movies;return o.a.createElement("div",{className:"movies"},t.map(function(t,a){return o.a.createElement(j.a,{style:{textDecoration:"none"},key:t.id,to:"/movie/".concat(t.id)},o.a.createElement(P,Object.assign({movie:t,position:a},e)))}))}),T=(a(52),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(f.a)(t).call(this,e))).state={movieToSearch:""},a.setMovieToSearch=a.setMovieToSearch.bind(Object(h.a)(Object(h.a)(a))),a.searchMovie=a.searchMovie.bind(Object(h.a)(Object(h.a)(a))),a}return Object(p.a)(t,e),Object(v.a)(t,[{key:"setMovieToSearch",value:function(e){this.setState({movieToSearch:e.target.value})}},{key:"searchMovie",value:function(){var e=Object(m.a)(s.a.mark(function e(t,a){var n,o,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=this.state.movieToSearch.replace(/ /g,"%20"),e.next=4,fetch("https://api.themoviedb.org/3/search/movie?api_key=e53ed30d9e273053803f465b52b55158&language=en-US&query=".concat(n,"&page=1&include_adult=false"));case 4:return o=e.sent,e.next=7,o.json();case 7:c=e.sent,a(c.results);case 9:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.movieToSearch;return o.a.createElement(O.Consumer,null,function(a){var n=a.setMovies;return o.a.createElement("form",{id:"search-form",onSubmit:function(t){return e.searchMovie(t,n)}},o.a.createElement("input",{className:"search-form_input",type:"text",placeholder:"search a movie",value:t,onChange:e.setMovieToSearch}),o.a.createElement("button",{type:"submit",disabled:!t},o.a.createElement("i",{className:"fas fa-search"})))})}}]),t}(o.a.Component)),I=function(){return o.a.createElement(O.Consumer,null,function(e){var t=e.movies;return o.a.createElement("main",{id:"home"},o.a.createElement(T,null),o.a.createElement(R,{movies:t}))})},U=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(f.a)(t).call(this,e))).state={openCreateCollection:!1,collectionName:""},a.setCollectionName=a.setCollectionName.bind(Object(h.a)(Object(h.a)(a))),a.openCreateCollectionForm=a.openCreateCollectionForm.bind(Object(h.a)(Object(h.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(h.a)(Object(h.a)(a))),a}return Object(p.a)(t,e),Object(v.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault(),this.setState({collectionName:"",openCreateCollection:!1})}},{key:"setCollectionName",value:function(e){this.setState({collectionName:e.target.value})}},{key:"openCreateCollectionForm",value:function(){this.setState({openCreateCollection:!this.state.openCreateCollection})}},{key:"render",value:function(){var e=this,t=this.state,a=t.collectionName,n=t.openCreateCollection;return o.a.createElement(O.Consumer,null,function(t){var c=t.createCollection;return o.a.createElement("nav",{className:"my-collections_nav"},o.a.createElement("button",{className:"my-collections_create",onClick:e.openCreateCollectionForm},"New collection"),n&&o.a.createElement("form",{id:"my-collections_create-form",onSubmit:function(t){c(a),e.handleSubmit(t)}},o.a.createElement("input",{type:"text",placeholder:"name of collection",value:a,className:"my-collections_input",onChange:e.setCollectionName}),o.a.createElement("button",{type:"submit",disabled:!a},o.a.createElement("i",{className:"fas fa-plus"}))))})}}]),t}(o.a.Component),J=function(e){return o.a.createElement(O.Consumer,null,function(t){var a=t.collections,n=t.deleteCollection;return o.a.createElement("aside",{className:"my-collections_aside"},o.a.createElement("ul",null,a&&a.length>0&&a.map(function(t,a){return o.a.createElement("li",{className:a===e.selectedCollection?"my-collections-nav--active ":"",key:t.id,onClick:function(){return e.selectCollection(a)}}," ",o.a.createElement("span",{className:"my-collections_delete",onClick:function(e){return n(e,a)}},o.a.createElement("i",{className:"fas fa-trash-alt"})),t.name)})))})},q=(a(53),function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(d.a)(this,Object(f.a)(t).call(this))).state={selectedCollection:0},e.selectCollection=e.selectCollection.bind(Object(h.a)(Object(h.a)(e))),e}return Object(p.a)(t,e),Object(v.a)(t,[{key:"selectCollection",value:function(e){this.setState({selectedCollection:e})}},{key:"render",value:function(){var e=this,t=this.props.match;return o.a.createElement(O.Consumer,null,function(a){var n=a.collections;return o.a.createElement("main",{id:"my-collections"},o.a.createElement(U,null),o.a.createElement(J,{selectCollection:e.selectCollection,selectedCollection:e.state.selectedCollection}),o.a.createElement("section",{className:"my-collections_movies"},n&&n[e.state.selectedCollection]&&n[e.state.selectedCollection].movies.length>0&&o.a.createElement(R,Object.assign({movies:n[e.state.selectedCollection].movies},t,{selectedCollection:e.state.selectedCollection}))))})}}]),t}(o.a.Component)),B=a(27),H=(a(54),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(f.a)(t).call(this,e))).state={movie:{}},a}return Object(p.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){var e=Object(m.a)(s.a.mark(function e(){var t,a,n,o,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="https://api.themoviedb.org/3/movie/".concat(this.props.match.params.id),a="".concat(t,"?api_key=e53ed30d9e273053803f465b52b55158&language=en-US"),n="".concat(t,"/credits?api_key=e53ed30d9e273053803f465b52b55158"),e.next=5,this.callAPI(a);case 5:return o=e.sent,e.next=8,this.callAPI(n);case 8:c=e.sent,this.setState({movie:Object(B.a)({},o,c)});case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"callAPI",value:function(){var e=Object(m.a)(s.a.mark(function e(t){var a,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.movie;return o.a.createElement("main",{className:"movie-info"},o.a.createElement("div",null,o.a.createElement("img",{className:"movie-info_poster",src:e.poster_path?"https://image.tmdb.org/t/p/w500/".concat(e.poster_path):D.a,alt:"".concat(e.title," Poster")})),o.a.createElement("div",{className:"movie-info_info"},o.a.createElement("ul",null,o.a.createElement("li",{className:"movie-info_title"},o.a.createElement("p",null,e.title)),o.a.createElement("li",{className:"movie-info_desc"},o.a.createElement("p",null,e.overview)),o.a.createElement("li",{className:"movie-info_cast"},o.a.createElement("h3",null,"Cast:"),e.cast&&e.cast.slice(0,3).map(function(e,t){return o.a.createElement("span",{key:e.id},e.name,2!==t?",":""," ")})),o.a.createElement("li",{className:"movie-info_director"},o.a.createElement("h3",null,"Director: ")," ",o.a.createElement("p",null," ",e.crew&&e.crew[0].name)),o.a.createElement("li",{className:"movie-info_release_date"},o.a.createElement("h3",null,"Release Date: "),o.a.createElement("p",null,e.release_date)))))}}]),t}(o.a.Component)),W=(a(55),function(){return o.a.createElement("div",{className:"error-message"},o.a.createElement("i",{className:"fas fa-skull-crossbones"}),o.a.createElement("p",{className:"error-message_message"},"Ups, the url doesn't exist!"))}),$=function(){return o.a.createElement(E.a,null,o.a.createElement(C.a,{exact:!0,path:"/",component:I}),o.a.createElement(C.a,{path:"/my-collections",component:q}),o.a.createElement(C.a,{path:"/movie/:id",component:H}),o.a.createElement(C.a,{component:W}))},z=a(62),G=(a(57),function(){return o.a.createElement("nav",{id:"navigator"},o.a.createElement("ul",{className:"navigator_ul"},o.a.createElement("li",{className:"navigator_li"},o.a.createElement(z.a,{exact:!0,to:"/",className:"navigator_a",activeClassName:"navigator_a--selected"},"Home")),o.a.createElement("li",{className:"navigator_li"},o.a.createElement(z.a,{to:"/my-collections",className:"navigator_a",activeClassName:"navigator_a--selected"},"My Collections"))))}),K=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(d.a)(this,Object(f.a)(t).call(this))).state={movies:[],collections:JSON.parse(localStorage.getItem("collections"))||[]},e.setMovies=e.setMovies.bind(Object(h.a)(Object(h.a)(e))),e.addFavorite=e.addFavorite.bind(Object(h.a)(Object(h.a)(e))),e.deleteFavorite=e.deleteFavorite.bind(Object(h.a)(Object(h.a)(e))),e.deleteAllMoviesFavorite=e.deleteAllMoviesFavorite.bind(Object(h.a)(Object(h.a)(e))),e.createCollection=e.createCollection.bind(Object(h.a)(Object(h.a)(e))),e.deleteCollection=e.deleteCollection.bind(Object(h.a)(Object(h.a)(e))),e.addRating=e.addRating.bind(Object(h.a)(Object(h.a)(e))),e}return Object(p.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){var e=Object(m.a)(s.a.mark(function e(){var t,a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.themoviedb.org/3/discover/movie?api_key=e53ed30d9e273053803f465b52b55158&language=en-US&sort_by=popularity.desc&include_adult=false&include_video=false");case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,this.setMovies(a.results);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){localStorage.setItem("collections",JSON.stringify(this.state.collections))}},{key:"setMovies",value:function(e){this.setState({movies:e})}},{key:"addFavorite",value:function(e,t){var a=Object.assign({},t,{rating:"none"});this.setState(function(t){var n=t.collections.map(function(t){return t.id===e.id?Object.assign({},t,{movies:[].concat(Object(i.a)(t.movies),[a])}):t});return{collections:Object(i.a)(n)}})}},{key:"deleteFavorite",value:function(e,t){this.setState(function(a){return Object(i.a)(a.collections)[e].movies.splice(t,1),{collections:Object(i.a)(a.collections)}})}},{key:"deleteAllMoviesFavorite",value:function(e){this.setState(function(t){return t.collections.forEach(function(t){t.movies.forEach(function(a,n){a.id===e.id&&t.movies.splice(n,1)})}),{collections:Object(i.a)(t.collections)}})}},{key:"createCollection",value:function(e){var t={id:this.state.collections.length+1,name:e,movies:[]};this.setState(function(e){return{collections:[].concat(Object(i.a)(e.collections),[t])}})}},{key:"deleteCollection",value:function(e,t){e.stopPropagation(),this.setState(function(e){return e.collections.splice(t,1),{collections:Object(i.a)(e.collections)}})}},{key:"addRating",value:function(e,t,a){this.setState(function(n){var o=n.collections[e].movies.map(function(e){return e.id===a.id?Object.assign({},e,{rating:t}):e}),c=n.collections.map(function(t,a){return a===e?Object.assign({},t,{movies:Object(i.a)(o)}):t});return{collections:Object(i.a)(c)}})}},{key:"render",value:function(){return o.a.createElement(O.Provider,{value:{movies:this.state.movies,collections:this.state.collections,setMovies:this.setMovies,addFavorite:this.addFavorite,deleteFavorite:this.deleteFavorite,deleteAllMoviesFavorite:this.deleteAllMoviesFavorite,createCollection:this.createCollection,deleteCollection:this.deleteCollection,addRating:this.addRating}},o.a.createElement(b.a,{basename:"/ilovemovies-react"},o.a.createElement(o.a.Fragment,null,o.a.createElement(G,null),o.a.createElement($,null))))}}]),t}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(K,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[28,1,2]]]);
//# sourceMappingURL=main.81eb4d36.chunk.js.map